<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Home</title>
    <link rel="stylesheet" href="/static/styles/base.css" />
    <link rel="stylesheet" href="/static/styles/layout.css" />
    <link rel="stylesheet" href="/static/styles/components.css" />
    <link rel="stylesheet" href="/static/styles/utilities.css" />
    <!-- Font Awesome CDN for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body>
    <nav class="nav-bar">
        <div class="nav-brand">
            FoxEngine
            <span class="nav-title">Home</span>
        </div>
        <span id="totalCount" class="nav-count">Total Records: Loading...</span>
        <div class="nav-buttons">
            <a href="/" class="icon-btn" title="Home">
                <i class="fas fa-home"></i>
            </a>
            <a href="/files" class="icon-btn" title="View Files">
                <i class="fas fa-folder-open"></i>
            </a>
            <a href="/upload" class="icon-btn" title="Upload">
                <i class="fas fa-upload"></i>
            </a>
            <button onclick="window.location.href='/logout'" class="icon-btn" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </nav>

    <div class="container">
      <header class="page-header">
        <h1 class="page-title">Home</h1>
      </header>

      <!-- Search/Filter Section -->
      <section class="section">
        <h1>Search</h1>
        <div id="searchFields">
          <div class="search-row">
            <input type="text" placeholder="Field" list="availableFields" class="field-name" />
            <input type="text" placeholder="Value" class="field-value" />
          </div>
        </div>
        <datalist id="availableFields">
          <option value="username">
          <option value="email">
          <option value="age">
          <option value="city">
          <option value="active">
          <option value="source">
          <option value="tags">
          <option value="skills">
        </datalist>
        <button id="addFieldBtn" class="icon-btn" title="Add Field">
          <i class="fas fa-plus-circle"></i>
        </button>
        <button onclick="doSearch()" class="icon-btn" title="Search">
          <i class="fas fa-search"></i>
        </button>
        <button onclick="doDownload()" class="icon-btn" title="Download CSV">
          <i class="fas fa-file-download"></i>
        </button>
      </section>

      <hr/>

      <!-- Records Table with Pagination -->
      <section class="section">
        <h2>Records</h2>
        <div class="table-wrapper">
          <table id="resultsTable">
            <thead id="resultsHead"></thead>
            <tbody id="resultsBody"></tbody>
          </table>
        </div>
      </section>

      <!-- Logs Panel -->
      <div id="logsPanel" class="logs-panel collapsed">
        <div class="logs-panel-header" onclick="toggleLogs()">
          <h2>API Logs</h2>
          <button class="toggle-logs-btn">
            <i class="fas fa-chevron-up"></i>
          </button>
        </div>
        <div class="logs-content">
          <ul id="logsList" class="logs-list"></ul>
        </div>
      </div>
    </div>

    <!-- Edit Modal -->
    <div class="overlay" id="editOverlay">
      <div class="modal">
        <h3>Edit Record</h3>
        <form id="editForm">
          <input type="hidden" id="editId" />
          <div id="editFields"></div>
        </form>
        <div class="modal-actions">
          <button class="icon-btn" onclick="saveEdit()" title="Save">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" onclick="closeModal()" title="Cancel">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>

    <script src="/static/scripts.js"></script>
  </body>
</html>
